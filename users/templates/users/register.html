{% extends 'base.html' %}

{% load crispy_forms_tags%}

{% block content %}
<div class="container-fluid" style="background-color: aliceblue;">
{% include 'includes/navbar.html' %}

    <div class="col-md-4 offset-md-4 align-items-center register rounded">

        <h4 class="text-center">Register with Developers Stories</h4>
        <form action="" method="POST">
            {% csrf_token %}

            {{form|crispy }}
            <br>

            <input disabled id="register-btn" onclick="changeName()" class="btn btn-primary form-control" type="submit" value="Register"><br>

            <div class="text-center mt-2">
                <a  href="{% url 'login' %}">Already have an account? Login</a>
            </div>

        </form>

        </div>
</div>
{% endblock %}
{% block javascript %}
    <script>
    const username = document.getElementById('id_username');
    const email = document.getElementById('id_email');
    const password = document.getElementById('id_password1');
    const btn = document.getElementById('register-btn');

    username.addEventListener('input', function () {
        email.addEventListener('input', function () {
            password.addEventListener('input', function () {
                btn.disabled = (this.value === '');
            })
        })
    });
    function changeName() {
        document.getElementById("register-btn").value = "Registering...Please wait"
    }

    </script>
{% endblock %}